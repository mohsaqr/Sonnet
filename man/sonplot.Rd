% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sonplot.R
\name{sonplot}
\alias{sonplot}
\title{qgraph-Compatible Network Plotting}
\usage{
sonplot(
  x,
  layout = "spring",
  directed = NULL,
  seed = 42,
  theme = NULL,
  node_size = NULL,
  node_size2 = NULL,
  node_shape = "circle",
  node_svg = NULL,
  svg_preserve_aspect = TRUE,
  node_fill = NULL,
  node_border_color = NULL,
  node_border_width = 1,
  node_alpha = 1,
  labels = TRUE,
  label_size = NULL,
  label_color = "black",
  label_position = "center",
  label_fontface = "plain",
  label_fontfamily = "sans",
  label_hjust = 0.5,
  label_vjust = 0.5,
  label_angle = 0,
  pie_values = NULL,
  pie_colors = NULL,
  pie_border_width = NULL,
  donut_fill = NULL,
  donut_values = NULL,
  donut_color = NULL,
  donut_colors = NULL,
  donut_border_color = NULL,
  donut_border_width = NULL,
  donut_inner_ratio = 0.5,
  donut_bg_color = "gray90",
  donut_shape = "circle",
  donut_show_value = FALSE,
  donut_value_size = 0.8,
  donut_value_color = "black",
  donut_value_fontface = "bold",
  donut_value_fontfamily = "sans",
  donut_value_digits = 2,
  donut_value_prefix = "",
  donut_value_suffix = "",
  donut2_values = NULL,
  donut2_colors = NULL,
  donut2_inner_ratio = 0.4,
  edge_color = NULL,
  edge_width = NULL,
  esize = NULL,
  edge_width_range = c(0.5, 4),
  edge_scale_mode = "linear",
  cut = 0,
  minimum = 0,
  maximum = NULL,
  edge_alpha = 0.8,
  edge_labels = FALSE,
  edge_label_size = 0.8,
  edge_label_color = "gray30",
  edge_label_bg = "white",
  edge_label_position = 0.5,
  edge_label_offset = 0,
  edge_label_fontface = 1,
  edge_label_shadow = FALSE,
  edge_label_shadow_color = "gray40",
  edge_label_shadow_offset = 0.5,
  edge_label_shadow_alpha = 0.5,
  edge_style = 1,
  curvature = 0,
  curve_scale = TRUE,
  curve_shape = 0,
  curve_pivot = 0.5,
  curves = TRUE,
  arrow_size = 1,
  show_arrows = TRUE,
  bidirectional = FALSE,
  loop_rotation = NULL,
  edge_start_style = "solid",
  edge_start_length = 0.15,
  edge_ci = NULL,
  edge_ci_scale = 2,
  edge_ci_alpha = 0.15,
  edge_ci_color = NA,
  edge_ci_style = 2,
  edge_ci_arrows = FALSE,
  edge_label_style = "none",
  edge_label_template = NULL,
  edge_label_digits = 2,
  edge_label_oneline = TRUE,
  edge_label_ci_format = "bracket",
  edge_ci_lower = NULL,
  edge_ci_upper = NULL,
  edge_label_p = NULL,
  edge_label_p_digits = 3,
  edge_label_p_prefix = "p=",
  edge_label_stars = NULL,
  threshold = 0,
  positive_color = "#2E7D32",
  negative_color = "#C62828",
  title = NULL,
  title_size = 1.2,
  margins = c(0.1, 0.1, 0.1, 0.1),
  background = "white",
  rescale = TRUE,
  layout_scale = 1,
  layout_margin = 0.15,
  aspect = TRUE,
  usePCH = FALSE,
  scaling = "default",
  legend = FALSE,
  legend_position = "topright",
  legend_size = 0.8,
  legend_edge_colors = TRUE,
  legend_node_sizes = FALSE,
  groups = NULL,
  node_names = NULL,
  filetype = "default",
  filename = "sonplot",
  width = 7,
  height = 7,
  res = 600,
  ...
)
}
\arguments{
\item{x}{Network input. Can be:
\itemize{
\item A square numeric matrix (adjacency/weight matrix)
\item A data frame with edge list (from, to, optional weight columns)
\item An igraph object
\item A sonnet_network object
}}

\item{layout}{Layout algorithm: "circle", "spring", "groups", or a matrix
of x,y coordinates, or an igraph layout function. Also supports igraph
two-letter codes: "kk", "fr", "drl", "mds", "ni", etc.}

\item{directed}{Logical. Force directed interpretation. NULL for auto-detect.}

\item{seed}{Random seed for deterministic layouts. Default 42.}

\item{theme}{Theme name: "classic", "dark", "minimal", "colorblind", etc.}

\item{node_size}{Node size(s). NULL uses qgraph adaptive formula: 8*exp(-n/80)+1.
Single value or vector.}

\item{node_size2}{Secondary node size for ellipse/rectangle height.}

\item{node_shape}{Node shape(s): "circle", "square", "triangle", "diamond",
"pentagon", "hexagon", "star", "heart", "ellipse", "cross", or any custom
SVG shape registered with register_svg_shape().}

\item{node_svg}{Custom SVG for nodes: path to SVG file OR inline SVG string.}

\item{svg_preserve_aspect}{Logical: maintain SVG aspect ratio? Default TRUE.}

\item{node_fill}{Node fill color(s).}

\item{node_border_color}{Node border color(s).}

\item{node_border_width}{Node border width(s).}

\item{node_alpha}{Node transparency (0-1). Default 1.}

\item{labels}{Node labels: TRUE (use node names/indices), FALSE (none),
or character vector.}

\item{label_size}{Label character expansion factor.}

\item{label_color}{Label text color.}

\item{label_position}{Label position: "center", "above", "below", "left", "right".}

\item{label_fontface}{Font face for labels: "plain", "bold", "italic", "bold.italic". Default "plain".}

\item{label_fontfamily}{Font family for labels: "sans", "serif", "mono". Default "sans".}

\item{label_hjust}{Horizontal justification (0=left, 0.5=center, 1=right). Default 0.5.}

\item{label_vjust}{Vertical justification (0=bottom, 0.5=center, 1=top). Default 0.5.}

\item{label_angle}{Text rotation angle in degrees. Default 0.}

\item{pie_values}{List of numeric vectors for pie chart nodes.}

\item{pie_colors}{List of color vectors for pie segments.}

\item{pie_border_width}{Border width for pie slice dividers. NULL uses node_border_width.}

\item{donut_fill}{Numeric value (0-1) for donut fill proportion.}

\item{donut_values}{Deprecated. Use donut_fill.}

\item{donut_color}{Fill color(s) for the donut ring.}

\item{donut_colors}{Deprecated. Use donut_color instead.}

\item{donut_border_color}{Border color for donut rings. NULL uses node_border_color.}

\item{donut_border_width}{Border width for donut rings. NULL uses node_border_width.}

\item{donut_inner_ratio}{Inner radius ratio for donut (0-1). Default 0.5.}

\item{donut_bg_color}{Background color for unfilled donut portion.}

\item{donut_shape}{Base shape for donut: "circle", "square", "hexagon", etc.}

\item{donut_show_value}{Logical: show value in donut center? Default FALSE.}

\item{donut_value_size}{Font size for donut center value.}

\item{donut_value_color}{Color for donut center value.}

\item{donut_value_fontface}{Font face for donut center value: "plain", "bold", etc. Default "bold".}

\item{donut_value_fontfamily}{Font family for donut center value. Default "sans".}

\item{donut_value_digits}{Decimal places for donut center value. Default 2.}

\item{donut_value_prefix}{Text before donut center value. Default "".}

\item{donut_value_suffix}{Text after donut center value. Default "".}

\item{donut2_values}{List of values for inner donut ring (for double donut).}

\item{donut2_colors}{List of color vectors for inner donut ring segments.}

\item{donut2_inner_ratio}{Inner radius ratio for inner donut ring. Default 0.4.}

\item{edge_color}{Edge color(s). If NULL, uses positive_color/negative_color.}

\item{edge_width}{Edge width(s). If NULL, scales by weight using qgraph formula.}

\item{esize}{Base edge size for weight scaling. NULL uses qgraph adaptive formula:
15*exp(-n/90)+1 (halved for directed networks).}

\item{edge_width_range}{Output width range as c(min, max) for weight-based scaling.
Default c(0.5, 4). Edges are scaled to fit within this range.}

\item{edge_scale_mode}{Scaling mode for edge weights: "linear" (default, qgraph-style),
"log", "sqrt", or "rank".}

\item{cut}{qgraph-style cutoff: 0 = continuous scaling (default), positive = threshold.}

\item{minimum}{Minimum weight threshold. Edges below this are hidden.}

\item{maximum}{Maximum weight for scaling. NULL for auto.}

\item{edge_alpha}{Edge transparency (0-1). Default 0.8.}

\item{edge_labels}{Edge labels: TRUE (show weights), FALSE (none), or character vector.}

\item{edge_label_size}{Edge label size.}

\item{edge_label_color}{Edge label text color.}

\item{edge_label_bg}{Edge label background color.}

\item{edge_label_position}{Position along edge (0=start, 0.5=middle, 1=end). Default 0.5.}

\item{edge_label_offset}{Perpendicular offset for edge labels (0 = on line).}

\item{edge_label_fontface}{Font face: 1=plain, 2=bold, 3=italic.}

\item{edge_label_shadow}{Logical: enable drop shadow for edge labels? Default FALSE.}

\item{edge_label_shadow_color}{Color for edge label shadow. Default "gray40".}

\item{edge_label_shadow_offset}{Offset distance for shadow. Default 0.5.}

\item{edge_label_shadow_alpha}{Transparency for shadow (0-1). Default 0.5.}

\item{curvature}{Edge curvature. 0 for straight, positive/negative for curves.}

\item{curves}{Curve mode: TRUE = reciprocal edges curved, FALSE = all straight,
"force" = all edges curved.}

\item{arrow_size}{Arrow head size.}

\item{show_arrows}{Logical or vector: show arrows on directed edges?}

\item{edge_start_style}{Style for the start segment of edges: "solid" (default),
"dashed", or "dotted". Use dashed/dotted to indicate edge direction.}

\item{edge_start_length}{Fraction of edge length for styled start segment (0-0.5).
Default 0.15.}

\item{edge_ci}{Numeric vector of CI widths (0-1 scale). Larger values = more uncertainty.}

\item{edge_ci_scale}{Width multiplier for underlay thickness. Default 2.}

\item{edge_ci_alpha}{Transparency for underlay (0-1). Default 0.15.}

\item{edge_ci_color}{Underlay color. NA (default) uses main edge color.}

\item{edge_ci_style}{Line type for underlay: 1=solid, 2=dashed, 3=dotted. Default 2.}

\item{edge_ci_arrows}{Logical: show arrows on underlay? Default FALSE.}

\item{edge_label_style}{Preset style: "none", "estimate", "full", "range", "stars".}

\item{edge_label_template}{Template with placeholders: \{est\}, \{range\}, \{low\}, \{up\}, \{p\}, \{stars\}.}

\item{edge_label_digits}{Decimal places for estimates. Default 2.}

\item{edge_label_oneline}{Logical: single line format? Default TRUE.}

\item{edge_label_ci_format}{CI format: "bracket" for \link{low, up} or "dash" for low-up.}

\item{edge_ci_lower}{Numeric vector of lower CI bounds for labels.}

\item{edge_ci_upper}{Numeric vector of upper CI bounds for labels.}

\item{edge_label_p}{Numeric vector of p-values for edges.}

\item{edge_label_p_digits}{Decimal places for p-values. Default 3.}

\item{edge_label_p_prefix}{Prefix for p-values. Default "p=".}

\item{edge_label_stars}{Stars for labels: character vector, TRUE (compute from p),
or numeric (treated as p-values).}

\item{positive_color}{Color for positive weights.}

\item{negative_color}{Color for negative weights.}

\item{title}{Plot title.}

\item{title_size}{Title font size.}

\item{margins}{Margins as c(bottom, left, top, right).}

\item{background}{Background color.}

\item{rescale}{Logical: rescale layout to \link{-1, 1}?}

\item{layout_scale}{Scale factor for layout. >1 expands (spreads nodes apart),
<1 contracts (brings nodes closer). Use "auto" to automatically scale based
on node count (compact for small networks, expanded for large). Default 1.}

\item{layout_margin}{Margin around layout as fraction of range. Default 0.15.}

\item{aspect}{Logical: maintain aspect ratio?}

\item{usePCH}{Logical: use points() for simple circles (faster). Default FALSE.}

\item{scaling}{Scaling mode: "default" for qgraph-matched scaling, or "legacy".}

\item{legend}{Logical: show legend?}

\item{legend_position}{Position: "topright", "topleft", "bottomright", "bottomleft".}

\item{legend_size}{Legend text size.}

\item{legend_edge_colors}{Logical: show positive/negative edge colors in legend?}

\item{legend_node_sizes}{Logical: show node size scale in legend?}

\item{groups}{Group assignments for node coloring/legend.}

\item{node_names}{Alternative names for legend (separate from labels).}

\item{filetype}{Output format: "default" (screen), "png", "pdf", "svg", "jpeg", "tiff".}

\item{filename}{Output filename (without extension).}

\item{width}{Output width in inches.}

\item{height}{Output height in inches.}

\item{res}{Resolution in DPI for raster outputs. Default 600.}

\item{...}{Additional arguments passed to layout functions.}
}
\value{
Invisibly returns the sonnet_network object.
}
\description{
Network visualization that exactly replicates qgraph's visual logic.

Creates a network visualization using base R graphics with visual output
that exactly replicates qgraph's appearance. Uses qgraph's formulas for
node sizing, edge width scaling, and boundary calculations while maintaining
sonnet's snake_case parameter naming convention.
}
\section{Node Aesthetics}{

}

\section{Pie/Donut Nodes}{

}

\section{Edge Aesthetics}{

}

\section{Edge CI Underlays}{

}

\section{Edge Labels}{

}

\section{Edge Label Templates}{

}

\section{Plot Settings}{

}

\section{Legend}{

}

\section{Output}{

}

\examples{
# Basic network from adjacency matrix
adj <- matrix(c(0, 1, 1, 0,
                0, 0, 1, 1,
                0, 0, 0, 1,
                0, 0, 0, 0), 4, 4, byrow = TRUE)
sonplot(adj)

# Weighted network with automatic sizing
w_adj <- matrix(c(0, 0.5, -0.3, 0,
                  0.8, 0, 0.4, -0.2,
                  0, 0, 0, 0.6,
                  0, 0, 0, 0), 4, 4, byrow = TRUE)
sonplot(w_adj)

# Compare node sizes with qgraph
# For n=4 nodes: 8*exp(-4/80)+1 = 8.61
# sonplot uses same formula, so visuals should match qgraph

}
