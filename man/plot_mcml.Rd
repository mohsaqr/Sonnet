% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot-mcml.R
\name{plot_mcml}
\alias{plot_mcml}
\title{Plot Multi-Cluster Multi-Layer Network}
\usage{
plot_mcml(
  x,
  cluster_list = NULL,
  mode = c("weights", "tna"),
  layer_spacing = NULL,
  spacing = 3,
  shape_size = 1.2,
  summary_size = 4,
  skew_angle = 60,
  aggregation = c("sum", "mean", "max"),
  minimum = 0,
  colors = NULL,
  legend = TRUE,
  show_labels = TRUE,
  nodes = NULL,
  label_size = NULL,
  label_abbrev = NULL,
  node_size = 1.8,
  node_shape = "circle",
  cluster_shape = "circle",
  title = NULL,
  subtitle = NULL,
  title_size = 1.2,
  subtitle_size = 0.9,
  legend_position = "right",
  legend_size = 0.7,
  legend_pt_size = 1.2,
  summary_labels = TRUE,
  summary_label_size = 0.8,
  summary_label_position = 3,
  summary_label_color = "gray20",
  summary_arrows = TRUE,
  summary_arrow_size = 0.15,
  edge_width_range = c(0.3, 1.3),
  between_edge_width_range = c(0.5, 2),
  summary_edge_width_range = c(0.5, 2),
  edge_alpha = 0.35,
  between_edge_alpha = 0.6,
  summary_edge_alpha = 0.7,
  inter_layer_alpha = 0.5,
  edge_labels = FALSE,
  edge_label_size = 0.5,
  edge_label_color = "gray40",
  edge_label_digits = 2,
  summary_edge_labels = FALSE,
  summary_edge_label_size = 0.6,
  top_layer_scale = c(0.8, 0.25),
  inter_layer_gap = 0.6,
  node_radius_scale = 0.55,
  shell_alpha = 0.15,
  shell_border_width = 2,
  node_border_color = "gray30",
  summary_border_color = "gray20",
  summary_border_width = 2,
  label_color = "gray20",
  label_position = 3,
  ...
)
}
\arguments{
\item{x}{Weight matrix, tna object, cograph_network, or cluster_summary object}

\item{cluster_list}{Named list of node vectors per cluster, column name
string, or NULL for auto-detection. Ignored if x is cluster_summary.}

\item{mode}{What values to display on edges: "weights" (default) shows raw
aggregated weights, "tna" shows transition probabilities (row-normalized).}

\item{layer_spacing}{Vertical distance between layers. Default NULL (auto).}

\item{spacing}{Cluster spacing. Default 3.}

\item{shape_size}{Cluster shell size. Default 1.2.}

\item{summary_size}{Summary node size. Default 4.}

\item{skew_angle}{Perspective angle in degrees. Default 60.}

\item{aggregation}{How to aggregate: "sum", "mean", "max". Default "sum".
Ignored if x is cluster_summary.}

\item{minimum}{Edge threshold. Default 0.}

\item{colors}{Cluster colors. Default auto.}

\item{legend}{Show legend. Default TRUE.}

\item{show_labels}{Logical. Show node labels. Default TRUE.}

\item{nodes}{Node metadata. Can be:
\itemize{
\item NULL (default): Use existing nodes data from cograph_network
\item Data frame: Must have \code{label} column for matching; if \code{labels}
column exists, uses it for display text
}
Display priority: \code{labels} column > \code{label} column (identifiers).
Ignored if x is cluster_summary.}

\item{label_size}{Label text size. Default NULL (auto-scaled).}

\item{label_abbrev}{Label abbreviation: NULL (none), integer (max chars),
or "auto" (adaptive based on node count).}

\item{node_size}{Size of nodes in bottom layer. Default 1.8.}

\item{node_shape}{Shape of nodes: "circle", "square", "diamond", "triangle".
Can be a single value (applied to all) or a vector (one per node).
Default "circle".}

\item{cluster_shape}{Shape for cluster summary nodes in top layer.
Can be a single value or vector (one per cluster). Default "circle".}

\item{title}{Main plot title. Default NULL.}

\item{subtitle}{Subtitle below title. Default NULL.}

\item{title_size}{Title text size. Default 1.2.}

\item{subtitle_size}{Subtitle text size. Default 0.9.}

\item{legend_position}{Legend position: "right", "left", "top", "bottom", "none".
Default "right".}

\item{legend_size}{Legend text size. Default 0.7.}

\item{legend_pt_size}{Legend point size. Default 1.2.}

\item{summary_labels}{Show cluster labels on summary nodes. Default TRUE.}

\item{summary_label_size}{Summary label text size. Default 0.8.}

\item{summary_label_position}{Summary label position (1=below, 2=left, 3=above,
4=right). Default 3.}

\item{summary_label_color}{Summary label color. Default "gray20".}

\item{summary_arrows}{Show arrows on summary edges. Default TRUE.}

\item{summary_arrow_size}{Arrow head size. Default 0.15.}

\item{edge_width_range}{Min/max edge width for within-cluster edges. Default
c(0.3, 1.3).}

\item{between_edge_width_range}{Min/max edge width for between-cluster edges
in bottom layer. Default c(0.5, 2.0).}

\item{summary_edge_width_range}{Min/max edge width for summary edges in top
layer. Default c(0.5, 2.0).}

\item{edge_alpha}{Within-cluster edge transparency. Default 0.35.}

\item{between_edge_alpha}{Between-cluster edge transparency. Default 0.6.}

\item{summary_edge_alpha}{Summary layer edge transparency. Default 0.7.}

\item{inter_layer_alpha}{Inter-layer line transparency. Default 0.5.}

\item{edge_labels}{Show weight labels on within-cluster edges. Default FALSE.}

\item{edge_label_size}{Edge label text size. Default 0.5.}

\item{edge_label_color}{Edge label color. Default "gray40".}

\item{edge_label_digits}{Decimal places for edge labels. Default 2.}

\item{summary_edge_labels}{Show weight labels on summary edges. Default
FALSE.}

\item{summary_edge_label_size}{Summary edge label text size. Default 0.6.}

\item{top_layer_scale}{Top layer oval x/y scale factors. Default
c(0.8, 0.25).}

\item{inter_layer_gap}{Gap between layers as multiplier of spacing.
Default 0.6.}

\item{node_radius_scale}{Node radius within cluster as multiplier of
shape_size. Default 0.55.}

\item{shell_alpha}{Shell fill transparency. Default 0.15.}

\item{shell_border_width}{Shell border line width. Default 2.}

\item{node_border_color}{Detail node border color. Default "gray30".}

\item{summary_border_color}{Summary node border color. Default "gray20".}

\item{summary_border_width}{Summary node border width. Default 2.}

\item{label_color}{Detail label color. Default "gray20".}

\item{label_position}{Detail label position (1-4). Default 3.}

\item{...}{Unused.}
}
\value{
Invisibly returns the cluster_summary data object.
}
\description{
Two-layer visualization: bottom layer shows detailed multi-cluster network,
top layer shows summary network with one node per cluster.
}
\examples{
# Create test matrix
mat <- matrix(runif(36), 6, 6)
diag(mat) <- 0
colnames(mat) <- rownames(mat) <- LETTERS[1:6]

# Define clusters
clusters <- list(
  Cluster1 = c("A", "B"),
  Cluster2 = c("C", "D"),
  Cluster3 = c("E", "F")
)

# Plot directly
plot_mcml(mat, clusters)

# Pre-compute and reuse
cs <- cluster_summary(mat, clusters)
plot_mcml(cs)  # Uses pre-computed data
}
\seealso{
\code{\link{cluster_summary}}, \code{\link{plot_mtna}}
}
