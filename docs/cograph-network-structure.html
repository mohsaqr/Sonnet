<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cograph_network Structure Reference</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #059669;
            --accent: #7c3aed;
            --warning: #f59e0b;
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --border: #e2e8f0;
            --text: #1e293b;
            --text-muted: #64748b;
            --code-bg: #f1f5f9;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg);
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }

        header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid var(--border);
        }
        h1 { font-size: 2.5rem; color: var(--primary); margin-bottom: 0.5rem; }
        .subtitle { color: var(--text-muted); font-size: 1.1rem; }
        .version-badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            margin-top: 1rem;
        }

        h2 {
            font-size: 1.5rem;
            color: var(--text);
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }
        h3 { font-size: 1.1rem; color: var(--primary-dark); margin: 1.5rem 0 0.75rem; }

        /* Philosophy Box */
        .philosophy-box {
            background: linear-gradient(135deg, #eff6ff 0%, #f0fdf4 100%);
            border: 2px solid var(--primary);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }
        .philosophy-box h3 { color: var(--primary); margin-top: 0; }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }
        .icon-core { background: #dbeafe; }
        .icon-layout { background: #dcfce7; }
        .icon-aes { background: #fef3c7; }
        .icon-meta { background: #f3e8ff; }
        .icon-tna { background: #ffe4e6; }
        .icon-optional { background: #e2e8f0; }
        .icon-naming { background: #d1fae5; }

        .card-title { font-size: 1.25rem; font-weight: 600; }
        .card-desc { color: var(--text-muted); font-size: 0.9rem; }

        table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        th, td { text-align: left; padding: 0.75rem; border-bottom: 1px solid var(--border); }
        th {
            background: var(--code-bg);
            font-weight: 600;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
        }
        td:first-child {
            font-family: 'SFMono-Regular', Consolas, monospace;
            font-size: 0.9rem;
            color: var(--primary-dark);
            white-space: nowrap;
        }

        .type {
            display: inline-block;
            background: var(--code-bg);
            padding: 0.125rem 0.5rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        .badge {
            display: inline-block;
            padding: 0.125rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .badge-required { background: #fee2e2; color: #dc2626; }
        .badge-computed { background: #dbeafe; color: #2563eb; }
        .badge-optional { background: #f1f5f9; color: #64748b; }

        code {
            background: var(--code-bg);
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-family: 'SFMono-Regular', Consolas, monospace;
            font-size: 0.875rem;
        }
        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.875rem;
            line-height: 1.7;
        }
        pre code { background: none; padding: 0; color: inherit; }
        .comment { color: #94a3b8; }
        .string { color: #86efac; }
        .keyword { color: #c084fc; }
        .function { color: #67e8f9; }
        .number { color: #fde68a; }

        .comparison-table {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1.5rem 0;
        }
        .comparison-col {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid var(--border);
        }
        .comparison-col h4 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .check { color: var(--secondary); }

        .note {
            background: #eff6ff;
            border-left: 4px solid var(--primary);
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
        }
        .note-title { font-weight: 600; color: var(--primary-dark); margin-bottom: 0.25rem; }

        .naming-table { margin: 20px 0; }
        .naming-table td:first-child { font-weight: 600; color: var(--secondary); }
        .naming-table .old { color: #dc2626; text-decoration: line-through; }
        .naming-table .new { color: var(--secondary); font-weight: 600; }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }

        footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        @media (max-width: 768px) {
            body { padding: 1rem; }
            h1 { font-size: 1.75rem; }
            .comparison-table { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>cograph_network Structure</h1>
            <p class="subtitle">Unified network object format for the cograph package</p>
            <span class="version-badge">cograph v1.5.2</span>
        </header>

        <!-- Design Philosophy -->
        <section>
            <h2>Design Philosophy</h2>
            <div class="philosophy-box">
                <h3>Simplicity First</h3>
                <p>The <code>cograph_network</code> is designed for <strong>immediate usability</strong>. Pass any network format to <code>splot()</code> and get a publication-ready visualization. No conversion steps, no configuration required.</p>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h4 style="color: var(--primary); margin-bottom: 10px;">One Structure, Two Entry Points</h4>
                    <p>Both <code>cograph()</code> and <code>as_cograph()</code> return <strong>identical structure</strong>. The only difference: <code>cograph()</code> computes layout immediately, <code>as_cograph()</code> defers until plotting.</p>
                </div>
                <div class="card">
                    <h4 style="color: var(--primary); margin-bottom: 10px;">TNA-First Design</h4>
                    <p>Built with Transition Network Analysis as primary use case. TNA objects preserve all metadata for round-trip compatibility: weights, inits, labels, original model.</p>
                </div>
            </div>
        </section>

        <!-- Naming Convention -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon icon-naming">&#128221;</div>
                <div>
                    <div class="card-title">Naming Convention</div>
                    <div class="card-desc">Consistent, discoverable field names</div>
                </div>
            </div>

            <p>All fields use <strong>snake_case</strong> naming for consistency with the <code>sn_*()</code> API:</p>

            <table class="naming-table">
                <tr>
                    <th>Pattern</th>
                    <th>Convention</th>
                    <th>Examples</th>
                </tr>
                <tr>
                    <td>Core data</td>
                    <td>Simple nouns</td>
                    <td><code>nodes</code>, <code>edges</code>, <code>labels</code>, <code>weights</code></td>
                </tr>
                <tr>
                    <td>Counts</td>
                    <td>n_noun</td>
                    <td><code>n_nodes</code>, <code>n_edges</code></td>
                </tr>
                <tr>
                    <td>Booleans</td>
                    <td>is_adjective / has_noun</td>
                    <td><code>directed</code> (implicit is_)</td>
                </tr>
                <tr>
                    <td>Aesthetics</td>
                    <td>element_aes</td>
                    <td><code>node_aes</code>, <code>edge_aes</code></td>
                </tr>
                <tr>
                    <td>Metadata</td>
                    <td>noun_info</td>
                    <td><code>layout_info</code>, <code>plot_params</code></td>
                </tr>
            </table>

            <h3>Comparison with Other Packages</h3>
            <table class="naming-table">
                <tr>
                    <th>Concept</th>
                    <th>qgraph</th>
                    <th>igraph</th>
                    <th>cograph</th>
                </tr>
                <tr>
                    <td>Node count</td>
                    <td class="old">nNodes</td>
                    <td class="old">vcount()</td>
                    <td class="new">n_nodes</td>
                </tr>
                <tr>
                    <td>Edge data</td>
                    <td class="old">Edgelist</td>
                    <td class="old">E(g)</td>
                    <td class="new">edges</td>
                </tr>
                <tr>
                    <td>Weights</td>
                    <td class="old">getWmat()</td>
                    <td class="old">E(g)$weight</td>
                    <td class="new">weights</td>
                </tr>
                <tr>
                    <td>Layout</td>
                    <td class="old">layout</td>
                    <td class="old">layout_()</td>
                    <td class="new">layout + layout_info</td>
                </tr>
            </table>
        </div>

        <!-- Overview -->
        <section>
            <h2>Structure Overview</h2>
            <p>The <code>cograph_network</code> is a simple named list with S3 class <code>c("cograph_network", "list")</code>.</p>

            <div class="comparison-table">
                <div class="comparison-col">
                    <h4><span class="check">&#10003;</span> cograph()</h4>
                    <ul>
                        <li>Computes layout automatically</li>
                        <li>Applies default theme</li>
                        <li>Ready for immediate plotting</li>
                    </ul>
                </div>
                <div class="comparison-col">
                    <h4><span class="check">&#10003;</span> as_cograph()</h4>
                    <ul>
                        <li>Layout computed on-demand</li>
                        <li>Lightweight conversion</li>
                        <li>Same structure, same fields</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Core Edge Data -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon icon-core">&#128279;</div>
                <div>
                    <div class="card-title">Core Edge Data</div>
                    <div class="card-desc">Edge connectivity and weights</div>
                </div>
            </div>
            <table>
                <thead>
                    <tr><th>Field</th><th>Type</th><th>Description</th><th>Status</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td>$from</td>
                        <td><span class="type">integer</span></td>
                        <td>Source node indices (1-based)</td>
                        <td><span class="badge badge-required">Required</span></td>
                    </tr>
                    <tr>
                        <td>$to</td>
                        <td><span class="type">integer</span></td>
                        <td>Target node indices (1-based)</td>
                        <td><span class="badge badge-required">Required</span></td>
                    </tr>
                    <tr>
                        <td>$weight</td>
                        <td><span class="type">numeric</span></td>
                        <td>Edge weights (default 1 if unweighted)</td>
                        <td><span class="badge badge-required">Required</span></td>
                    </tr>
                    <tr>
                        <td>$edges</td>
                        <td><span class="type">data.frame</span></td>
                        <td>Edge data frame with columns: from, to, weight</td>
                        <td><span class="badge badge-required">Required</span></td>
                    </tr>
                    <tr>
                        <td>$n_edges</td>
                        <td><span class="type">integer</span></td>
                        <td>Number of edges</td>
                        <td><span class="badge badge-computed">Computed</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Core Node Data -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon icon-core">&#9673;</div>
                <div>
                    <div class="card-title">Core Node Data</div>
                    <div class="card-desc">Node information and metadata</div>
                </div>
            </div>
            <table>
                <thead>
                    <tr><th>Field</th><th>Type</th><th>Description</th><th>Status</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td>$nodes</td>
                        <td><span class="type">data.frame</span></td>
                        <td>Node data frame: id, label, x, y, and optionally inits (for TNA)</td>
                        <td><span class="badge badge-required">Required</span></td>
                    </tr>
                    <tr>
                        <td>$labels</td>
                        <td><span class="type">character</span></td>
                        <td>Node labels vector</td>
                        <td><span class="badge badge-required">Required</span></td>
                    </tr>
                    <tr>
                        <td>$n_nodes</td>
                        <td><span class="type">integer</span></td>
                        <td>Number of nodes</td>
                        <td><span class="badge badge-computed">Computed</span></td>
                    </tr>
                    <tr>
                        <td>$directed</td>
                        <td><span class="type">logical</span></td>
                        <td>TRUE if network is directed</td>
                        <td><span class="badge badge-required">Required</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Layout -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon icon-layout">&#128200;</div>
                <div>
                    <div class="card-title">Layout</div>
                    <div class="card-desc">Node positioning coordinates</div>
                </div>
            </div>
            <table>
                <thead>
                    <tr><th>Field</th><th>Type</th><th>Description</th><th>Status</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td>$layout</td>
                        <td><span class="type">data.frame</span></td>
                        <td>Layout coordinates with x, y columns. NULL if not yet computed</td>
                        <td><span class="badge badge-computed">Computed</span></td>
                    </tr>
                    <tr>
                        <td>$layout_info</td>
                        <td><span class="type">list</span></td>
                        <td>Layout metadata: name (algorithm), seed (random seed)</td>
                        <td><span class="badge badge-optional">Optional</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Aesthetics -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon icon-aes">&#127912;</div>
                <div>
                    <div class="card-title">Aesthetics</div>
                    <div class="card-desc">Visual styling for nodes and edges</div>
                </div>
            </div>
            <table>
                <thead>
                    <tr><th>Field</th><th>Type</th><th>Description</th><th>Status</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td>$node_aes</td>
                        <td><span class="type">list</span></td>
                        <td>Node aesthetics: size, shape, fill, border_color, border_width, alpha, etc.</td>
                        <td><span class="badge badge-required">Required</span></td>
                    </tr>
                    <tr>
                        <td>$edge_aes</td>
                        <td><span class="type">list</span></td>
                        <td>Edge aesthetics: width, color, positive_color, negative_color, alpha, style, etc.</td>
                        <td><span class="badge badge-required">Required</span></td>
                    </tr>
                    <tr>
                        <td>$theme</td>
                        <td><span class="type">CographTheme</span></td>
                        <td>Applied theme object (classic, dark, minimal, etc.)</td>
                        <td><span class="badge badge-optional">Optional</span></td>
                    </tr>
                    <tr>
                        <td>$plot_params</td>
                        <td><span class="type">list</span></td>
                        <td>Additional plot parameters</td>
                        <td><span class="badge badge-optional">Optional</span></td>
                    </tr>
                </tbody>
            </table>

            <h3>Default Aesthetics</h3>
            <div class="grid-2">
                <div>
                    <h4 style="margin-bottom: 10px;">Node Aesthetics</h4>
<pre><code><span class="keyword">list</span>(
  size = <span class="number">0.05</span>,
  shape = <span class="string">"circle"</span>,
  fill = <span class="string">"#4A90D9"</span>,
  border_color = <span class="string">"#2C5AA0"</span>,
  border_width = <span class="number">1</span>,
  alpha = <span class="number">1</span>
)</code></pre>
                </div>
                <div>
                    <h4 style="margin-bottom: 10px;">Edge Aesthetics</h4>
<pre><code><span class="keyword">list</span>(
  width = <span class="number">1</span>,
  color = <span class="string">"gray50"</span>,
  positive_color = <span class="string">"#2E7D32"</span>,
  negative_color = <span class="string">"#C62828"</span>,
  alpha = <span class="number">0.8</span>
)</code></pre>
                </div>
            </div>
        </div>

        <!-- TNA Integration -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon icon-tna">&#128202;</div>
                <div>
                    <div class="card-title">TNA Integration</div>
                    <div class="card-desc">Transition Network Analysis support</div>
                </div>
            </div>
            <table>
                <thead>
                    <tr><th>Field</th><th>Type</th><th>Description</th><th>Status</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td>$tna</td>
                        <td><span class="type">list</span></td>
                        <td>TNA metadata container (NULL if not from TNA)</td>
                        <td><span class="badge badge-optional">Optional</span></td>
                    </tr>
                    <tr>
                        <td>$tna$model</td>
                        <td><span class="type">tna</span></td>
                        <td>Original tna object for round-trip access</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>$tna$type</td>
                        <td><span class="type">character</span></td>
                        <td>"tna" or "group_tna"</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>$tna$group_index</td>
                        <td><span class="type">integer</span></td>
                        <td>Group index if from group_tna</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>$tna$group_name</td>
                        <td><span class="type">character</span></td>
                        <td>Group name if from group_tna</td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <div class="note">
                <div class="note-title">TNA Round-Trip</div>
                <p><code>get_tna_model(net)</code> retrieves the original tna object with all metadata intact.</p>
            </div>
        </div>

        <!-- Metadata & Validation -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon icon-meta">&#128196;</div>
                <div>
                    <div class="card-title">Metadata & Validation</div>
                    <div class="card-desc">Source tracking and statistical validation support</div>
                </div>
            </div>
            <table>
                <thead>
                    <tr><th>Field</th><th>Type</th><th>Description</th><th>Status</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td>$source</td>
                        <td><span class="type">character</span></td>
                        <td>Input type: "matrix", "edgelist", "igraph", "tna", etc.</td>
                        <td><span class="badge badge-required">Required</span></td>
                    </tr>
                    <tr>
                        <td>$weights</td>
                        <td><span class="type">matrix</span></td>
                        <td>Full n&times;n weight matrix for round-trip compatibility</td>
                        <td><span class="badge badge-optional">Optional</span></td>
                    </tr>
                    <tr>
                        <td>$raw_data</td>
                        <td><span class="type">any</span></td>
                        <td>Raw data for validation (bootstrap, permutation_test)</td>
                        <td><span class="badge badge-optional">Optional</span></td>
                    </tr>
                    <tr>
                        <td>$estimator</td>
                        <td><span class="type">function</span></td>
                        <td>Weight estimator function for validation</td>
                        <td><span class="badge badge-optional">Optional</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Usage Examples -->
        <section>
            <h2>Usage Examples</h2>

            <h3>Basic Usage</h3>
<pre><code><span class="comment"># Simplest possible - just pass data and plot</span>
<span class="function">splot</span>(my_matrix)

<span class="comment"># Create network object for reuse</span>
net <- <span class="function">cograph</span>(my_matrix)
<span class="function">splot</span>(net)

<span class="comment"># Lightweight conversion (layout on-demand)</span>
net <- <span class="function">as_cograph</span>(my_matrix)
<span class="function">splot</span>(net)  <span class="comment"># layout computed here</span></code></pre>

            <h3>Accessing Data</h3>
<pre><code><span class="comment"># Getter functions (recommended)</span>
<span class="function">n_nodes</span>(net)      <span class="comment"># Node count</span>
<span class="function">n_edges</span>(net)      <span class="comment"># Edge count</span>
<span class="function">is_directed</span>(net)  <span class="comment"># Directedness</span>
<span class="function">get_nodes</span>(net)    <span class="comment"># Node data.frame</span>
<span class="function">get_edges</span>(net)    <span class="comment"># Edge data.frame</span>

<span class="comment"># Direct $ access also works</span>
net$n_nodes
net$nodes
net$weights</code></pre>

            <h3>Pipe-Friendly Workflow</h3>
<pre><code><span class="function">cograph</span>(mat) |>
  <span class="function">sn_layout</span>(<span class="string">"circle"</span>) |>
  <span class="function">sn_nodes</span>(fill = <span class="string">"steelblue"</span>) |>
  <span class="function">sn_edges</span>(color = <span class="string">"weight"</span>) |>
  <span class="function">sn_theme</span>(<span class="string">"dark"</span>) |>
  <span class="function">splot</span>()</code></pre>

            <h3>TNA Integration</h3>
<pre><code><span class="keyword">library</span>(<span class="function">tna</span>)
model <- <span class="function">tna</span>(data)

<span class="comment"># Direct plotting</span>
<span class="function">splot</span>(model)

<span class="comment"># Or convert for modification</span>
net <- <span class="function">as_cograph</span>(model)
<span class="function">is_tna_network</span>(net)  <span class="comment"># TRUE</span>

<span class="comment"># Round-trip</span>
original <- <span class="function">get_tna_model</span>(net)
<span class="function">identical</span>(model$weights, original$weights)  <span class="comment"># TRUE</span></code></pre>
        </section>

        <!-- Complete Structure -->
        <section>
            <h2>Complete Structure Reference</h2>
<pre><code><span class="keyword">list</span>(
  <span class="comment"># Core edge data</span>
  from = <span class="function">integer</span>(),
  to = <span class="function">integer</span>(),
  weight = <span class="function">numeric</span>(),
  edges = <span class="function">data.frame</span>(),
  n_edges = <span class="function">integer</span>(),

  <span class="comment"># Core node data</span>
  nodes = <span class="function">data.frame</span>(),
  labels = <span class="function">character</span>(),
  n_nodes = <span class="function">integer</span>(),
  directed = <span class="function">logical</span>(),

  <span class="comment"># Layout</span>
  layout = <span class="function">data.frame</span>(),
  layout_info = <span class="function">list</span>(),

  <span class="comment"># Aesthetics</span>
  node_aes = <span class="function">list</span>(),
  edge_aes = <span class="function">list</span>(),
  theme = <span class="keyword">NULL</span>,
  plot_params = <span class="function">list</span>(),

  <span class="comment"># Metadata</span>
  source = <span class="function">character</span>(),
  weights = <span class="function">matrix</span>(),

  <span class="comment"># TNA integration</span>
  tna = <span class="function">list</span>(),

  <span class="comment"># Validation</span>
  raw_data = <span class="keyword">NULL</span>,
  estimator = <span class="keyword">NULL</span>
)

<span class="comment"># Class: c("cograph_network", "list")</span></code></pre>
        </section>

        <footer>
            <p>Generated for cograph package v1.5.2</p>
            <p>Documentation last updated: February 2026</p>
        </footer>
    </div>
</body>
</html>
